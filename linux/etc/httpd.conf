# Listen Ports
Listen 80
Listen 8080

# HTTP
<VirtualHost *:80>
    ProxyPreserveHost On
    # The next 3 lines are optional and are a way to dynamically proxy a short URL i.e.
    # http://domain.com/?id=tour
    # proxies to
    # http://domain.com/?portgw=8080&alias=tour&theme=tour
    RewriteEngine On                                                        # OPTIONAL
    RewriteCond %{QUERY_STRING} ^id=([A-Za-z0-9-]+)$                        # OPTIONAL
    RewriteRule / http://127.0.0.1:3000/?portgw=8080&alias=%1&theme=%1 [P]  # OPTIONAL
    ProxyPass / http://127.0.0.1:3000/
    ProxyPassReverse / http://127.0.0.1:3000/
</VirtualHost>

# WebSocket
<VirtualHost *:8080>
    RequestHeader set Host "127.0.0.1:8010"
    ProxyPreserveHost On
    ProxyPass / ws://127.0.0.1:8010/
    ProxyPassReverse / ws://127.0.0.1:8010/
</VirtualHost>